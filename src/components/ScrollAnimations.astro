---
// 滚动动画组件
---

<script>
  // 滚动动画观察器
  function initScrollAnimations() {
    const observerOptions = {
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animate-in');
        }
      });
    }, observerOptions);

    // 观察所有需要动画的元素
    const animatedElements = document.querySelectorAll('.card, .feature-card, .blog-post-card, .photo-item');
    animatedElements.forEach(el => {
      el.classList.add('animate-on-scroll');
      observer.observe(el);
    });
  }

  // 平滑滚动到顶部按钮
  function createScrollToTopButton() {
    const button = document.createElement('button');
    button.innerHTML = '↑';
    button.className = 'scroll-to-top';
    button.setAttribute('aria-label', '回到顶部');
    
    button.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });

    // 监听滚动事件，显示/隐藏按钮
    window.addEventListener('scroll', () => {
      if (window.scrollY > 300) {
        button.classList.add('visible');
      } else {
        button.classList.remove('visible');
      }
    });

    document.body.appendChild(button);
  }

  // 鼠标跟随效果
  function initMouseFollower() {
    const follower = document.createElement('div');
    follower.className = 'mouse-follower';
    document.body.appendChild(follower);

    let mouseX = 0;
    let mouseY = 0;
    let followerX = 0;
    let followerY = 0;

    document.addEventListener('mousemove', (e) => {
      mouseX = e.clientX;
      mouseY = e.clientY;
    });

    function animateFollower() {
      followerX += (mouseX - followerX) * 0.1;
      followerY += (mouseY - followerY) * 0.1;
      
      follower.style.left = followerX + 'px';
      follower.style.top = followerY + 'px';
      
      requestAnimationFrame(animateFollower);
    }
    
    animateFollower();
  }

  // 页面加载完成后初始化所有动画
  document.addEventListener('DOMContentLoaded', () => {
    initScrollAnimations();
    createScrollToTopButton();
    initMouseFollower();
  });
</script>

<style>
  /* 滚动动画样式 */
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .animate-on-scroll.animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  /* 回到顶部按钮 */
  .scroll-to-top {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 50px;
    height: 50px;
    background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    z-index: 1000;
    box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
  }

  .scroll-to-top.visible {
    opacity: 1;
    visibility: visible;
  }

  .scroll-to-top:hover {
    transform: translateY(-3px) scale(1.1);
    box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
  }

  /* 鼠标跟随效果 */
  .mouse-follower {
    position: fixed;
    width: 20px;
    height: 20px;
    background: radial-gradient(circle, rgba(255, 107, 107, 0.3), transparent);
    border-radius: 50%;
    pointer-events: none;
    z-index: 9999;
    transition: all 0.1s ease;
  }

  /* 为可交互元素添加鼠标跟随效果 */
  .btn, .card, .nav-links a, .photo-item {
    position: relative;
  }

  .btn:hover ~ .mouse-follower,
  .card:hover ~ .mouse-follower,
  .nav-links a:hover ~ .mouse-follower,
  .photo-item:hover ~ .mouse-follower {
    transform: scale(2);
    background: radial-gradient(circle, rgba(255, 107, 107, 0.5), transparent);
  }

  /* 页面加载动画 */
  @keyframes pageLoad {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  body {
    animation: pageLoad 0.8s ease-out;
  }

  /* 文字打字机效果 */
  @keyframes typewriter {
    from { width: 0; }
    to { width: 100%; }
  }

  .typewriter {
    overflow: hidden;
    border-right: 2px solid #ff6b6b;
    white-space: nowrap;
    animation: typewriter 3s steps(40, end), blink-caret 0.75s step-end infinite;
  }

  @keyframes blink-caret {
    from, to { border-color: transparent; }
    50% { border-color: #ff6b6b; }
  }

  /* 响应式优化 */
  @media (max-width: 768px) {
    .scroll-to-top {
      bottom: 20px;
      right: 20px;
      width: 45px;
      height: 45px;
      font-size: 18px;
    }

    .mouse-follower {
      display: none; /* 在移动设备上禁用鼠标跟随效果 */
    }
  }
</style>
